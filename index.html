<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Modelo 15 ‚Äî Campo gravitatorio (Interactive 2D)</title>

<!-- Plotly -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<style>
  :root{
    --bg: #0b0f1a;
    --card: rgba(255,255,255,0.04);
    --glass: rgba(255,255,255,0.03);
    --accent: #7afcff;
    --accent2: #9b7aff;
    --muted: #bfc7d6;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#071026,#0b0f1a);font-family:Inter,Arial;}
  .wrap{max-width:1200px;margin:auto;padding:18px;color:var(--muted);}
  .layout{display:grid;grid-template-columns:420px 1fr;gap:16px;}
  @media(max-width:980px){.layout{grid-template-columns:1fr}}
  .card{background:var(--card);padding:16px;border-radius:12px;backdrop-filter:blur(6px);box-shadow:0 8px 30px rgba(0,0,0,0.5);}
  label{min-width:120px;color:#e8f3ff;font-size:13px;}
  input[type="number"],input[type="range"]{flex:1;margin-left:6px;}
  #viewer{height:560px;background:#000;border-radius:12px;}
</style>
</head>
<body>

<div class="wrap">
  <h1 style="color:var(--accent)">üåç Modelo 15 ‚Äî Campo gravitatorio con densidad radial</h1>
  <p style="color:var(--accent)">Materia: calculo de varias variables</p>
<p style="color:var(--accent)">Nombre: Joselyn Jazmin Dominguez Chavez y Jesus Gael Monroy Hernandez</p>
<p style="color:var(--accent)">Docente: Javier Garcia Lara</p>
  <div class="layout">

    <!-- PANEL IZQUIERDO -->
    <div class="card">
      <h3 style="color:var(--accent)">Par√°metros</h3>

      <div class="row" style="display:flex;margin-bottom:8px;">
        <label>Radio R:</label>
        <input id="R_num" type="number" min="0.5" max="5" step="0.01" value="1.0">
        <input id="R_rng" type="range" min="0.5" max="5" step="0.01" value="1.0">
      </div>

      <div class="row" style="display:flex;margin-bottom:8px;">
        <label>Densidad œÅ‚ÇÄ:</label>
        <input id="rho_num" type="number" min="10" max="10000" step="10" value="5500">
        <input id="rho_rng" type="range" min="10" max="10000" step="10" value="5500">
      </div>

      <div class="row" style="display:flex;margin-bottom:8px;">
        <label>Œ≤ (0‚Äì1):</label>
        <input id="beta_num" type="number" min="0" max="1" step="0.01" value="0.6">
        <input id="beta_rng" type="range" min="0" max="1" step="0.01" value="0.6">
      </div>

      <div class="row" style="display:flex;margin-bottom:8px;">
        <label>Resoluci√≥n N:</label>
        <input id="N_num" type="number" min="16" max="64" step="1" value="28">
        <input id="N_rng" type="range" min="16" max="64" step="1" value="28">
      </div>

      <button id="updateBtn" style="width:100%;padding:8px;border:none;border-radius:8px;background:var(--accent);color:black;margin-top:8px;font-weight:bold;">Actualizar</button>
      <button id="resetBtn" style="width:100%;padding:8px;border:none;border-radius:8px;background:#ff7ea8;color:black;margin-top:8px;font-weight:bold;">Restablecer</button>

      <h3 style="margin-top:14px;color:var(--accent)">Resultados</h3>
      <p><b>Masa total:</b> <span id="mass_out"></span></p>
      <p><b>Volumen:</b> <span id="vol_out"></span></p>
      <p><b>Densidad promedio:</b> <span id="avg_out"></span></p>
      <p> Ingresa con el slayer cada uno de tus datos solicitados una vez hecho esto actualiza todo
      al costado o a bajo si usas dispositivo mobil podras observar los graficos en 2Dl</p>
    </div>

    <!-- PANEL DERECHO -->
    <div>
      <div class="card">
        <h3 style="color:var(--accent)">Mapa 2D del campo (heatmap + contornos)</h3>
        <div id="viewer"></div>
      </div>

      <div class="card" style="margin-top:12px;">
        <h3 style="color:var(--accent)">Corte Z ‚âà 0 (Mapa de densidad)</h3>
        <div id="plot2d" style="height:340px;"></div>
      </div>
    </div>
  </div>
</div>

<script>
/* ------------------------------------
   FUNCIONES ANAL√çTICAS
-------------------------------------*/
function mass_analytical(R, rho0, beta){
  return 4*Math.PI*rho0*Math.pow(R,3)*(1/3 - beta/4);
}
function volume_sphere(R){
  return (4/3)*Math.PI*Math.pow(R,3);
}

/* ------------------------------------
   GENERAR MALLA 2D
-------------------------------------*/
function generateSlice(R, N, rho0, beta){
  const xs=[], ys=[], vals=[];

  for(let i=0;i<N;i++) xs.push(-R + 2*R*(i/(N-1)));
  for(let j=0;j<N;j++) ys.push(-R + 2*R*(j/(N-1)));

  for(let j=0;j<N;j++){
    for(let i=0;i<N;i++){
      const x = xs[i];
      const y = ys[j];
      const r = Math.sqrt(x*x + y*y);

      let rho = 0;
      if (r <= R) rho = rho0 * Math.max(0, 1 - beta*(r/R));

      vals.push(rho);
    }
  }

  const Z=[];
  for(let j=0;j<N;j++){
    const row=[];
    for(let i=0;i<N;i++) row.push(vals[j*N+i]);
    Z.push(row);
  }

  return {x: xs, y: ys, z: Z};
}

/* ------------------------------------
   RENDER SLICE PRINCIPAL (viewer)
-------------------------------------*/
function renderMainViewer(slice){
  let data = [
    {
      z: slice.z,
      x: slice.x,
      y: slice.y,
      type: "heatmap",
      colorscale: "Portland",
      showscale: true
    },
    {
      z: slice.z,
      x: slice.x,
      y: slice.y,
      type: "contour",
      contours: { coloring: "none" },
      line: { width: 1, color: "white" }
    }
  ];

  Plotly.newPlot("viewer", data, {
    margin: { t: 20 },
    xaxis: { title: "x" },
    yaxis: { title: "y" }
  }, {displayModeBar:false});
}

/* ------------------------------------
   RENDER DEL CORTE SECUNDARIO
-------------------------------------*/
function renderSlicePlot(slice){
  Plotly.newPlot("plot2d",
  [{
    z: slice.z,
    x: slice.x,
    y: slice.y,
    type: "heatmap",
    colorscale: "Electric"
  }],
  {margin:{t:10},xaxis:{title:'x'},yaxis:{title:'y'}},
  {displayModeBar:false});
}

/* ------------------------------------
   SINCRONIZACI√ìN DE INPUTS
-------------------------------------*/
function syncInputs(a,b){
  a.oninput = ()=> b.value = a.value;
  b.oninput = ()=> a.value = b.value;
}
syncInputs(R_num, R_rng);
syncInputs(rho_num, rho_rng);
syncInputs(beta_num, beta_rng);
syncInputs(N_num, N_rng);

/* ------------------------------------
   ACTUALIZAR TODO
-------------------------------------*/
function updateAll(){
  const R = parseFloat(R_num.value);
  const rho0 = parseFloat(rho_num.value);
  const beta = parseFloat(beta_num.value);
  const N = parseInt(N_num.value);

  const vol = volume_sphere(R);
  const mass = mass_analytical(R,rho0,beta);
  const avg = mass / vol;

  mass_out.innerText = mass.toExponential(5);
  vol_out.innerText = vol.toExponential(5);
  avg_out.innerText = avg.toExponential(5);

  const slice = generateSlice(R,N,rho0,beta);

  renderMainViewer(slice);
  renderSlicePlot(slice);
}

updateBtn.onclick = updateAll;

resetBtn.onclick = ()=>{
  R_num.value=1; R_rng.value=1;
  rho_num.value=5500; rho_rng.value=5500;
  beta_num.value=0.6; beta_rng.value=0.6;
  N_num.value=28; N_rng.value=28;
  updateAll();
};

updateAll();
</script>
</body>
</html>


